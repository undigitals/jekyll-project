var lunr=function(b){var a=new lunr.Index;a.pipeline.add(lunr.stopWordFilter,lunr.stemmer);if(b){b.call(a,a)}return a};lunr.version="0.4.1";if(typeof module!=="undefined"){module.exports=lunr}
/*!
 * lunr.utils
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.utils={};lunr.utils.warn=(function(a){return function(b){if(a.console&&console.warn){console.warn(b)}}})(this);lunr.utils.zeroFillArray=(function(){var a=[0];return function(b){while(a.length<b){a=a.concat(a)}return a.slice(0,b)}})();
/*!
 * lunr.EventEmitter
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.EventEmitter=function(){this.events={}};lunr.EventEmitter.prototype.addListener=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a;if(typeof b!=="function"){throw new TypeError("last argument must be a function")}c.forEach(function(d){if(!this.hasHandler(d)){this.events[d]=[]}this.events[d].push(b)},this)};lunr.EventEmitter.prototype.removeListener=function(b,c){if(!this.hasHandler(b)){return}var a=this.events[b].indexOf(c);this.events[b].splice(a,1);if(!this.events[b].length){delete this.events[b]}};lunr.EventEmitter.prototype.emit=function(b){if(!this.hasHandler(b)){return}var a=Array.prototype.slice.call(arguments,1);this.events[b].forEach(function(c){c.apply(undefined,a)})};lunr.EventEmitter.prototype.hasHandler=function(a){return a in this.events};
/*!
 * lunr.tokenizer
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.tokenizer=function(b){if(!b){return[]}if(Array.isArray(b)){return b.map(function(c){return c.toLowerCase()})}var b=b.replace(/^\s+/,"");for(var a=b.length-1;a>=0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b.split(/\s+/).map(function(c){return c.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()})};
/*!
 * lunr.Pipeline
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.Pipeline=function(){this._stack=[]};lunr.Pipeline.registeredFunctions={};lunr.Pipeline.registerFunction=function(b,a){if(a in this.registeredFunctions){lunr.utils.warn("Overwriting existing registered function: "+a)}b.label=a;lunr.Pipeline.registeredFunctions[b.label]=b};lunr.Pipeline.warnIfFunctionNotRegistered=function(a){var b=a.label&&(a.label in this.registeredFunctions);if(!b){lunr.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",a)}};lunr.Pipeline.load=function(b){var a=new lunr.Pipeline;b.forEach(function(d){var c=lunr.Pipeline.registeredFunctions[d];if(c){a.add(c)}else{throw new Error("Cannot load un-registered function: "+d)}});return a};lunr.Pipeline.prototype.add=function(){var a=Array.prototype.slice.call(arguments);a.forEach(function(b){lunr.Pipeline.warnIfFunctionNotRegistered(b);this._stack.push(b)},this)};lunr.Pipeline.prototype.after=function(a,b){lunr.Pipeline.warnIfFunctionNotRegistered(b);var c=this._stack.indexOf(a)+1;this._stack.splice(c,0,b)};lunr.Pipeline.prototype.before=function(a,b){lunr.Pipeline.warnIfFunctionNotRegistered(b);var c=this._stack.indexOf(a);this._stack.splice(c,0,b)};lunr.Pipeline.prototype.remove=function(a){var b=this._stack.indexOf(a);this._stack.splice(b,1)};lunr.Pipeline.prototype.run=function(e){var b=[],g=e.length,f=this._stack.length;for(var d=0;d<g;d++){var c=e[d];for(var a=0;a<f;a++){c=this._stack[a](c,d,e);if(c===void 0){break}}if(c!==void 0){b.push(c)}}return b};lunr.Pipeline.prototype.toJSON=function(){return this._stack.map(function(a){lunr.Pipeline.warnIfFunctionNotRegistered(a);return a.label})};
/*!
 * lunr.Vector
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.Vector=function(a){this.elements=a};lunr.Vector.prototype.magnitude=function(){if(this._magnitude){return this._magnitude}var c=0,b=this.elements,a=b.length,e;for(var d=0;d<a;d++){e=b[d];c+=e*e}return this._magnitude=Math.sqrt(c)};lunr.Vector.prototype.dot=function(f){var c=this.elements,b=f.elements,e=c.length,a=0;for(var d=0;d<e;d++){a+=c[d]*b[d]}return a};lunr.Vector.prototype.similarity=function(a){return this.dot(a)/(this.magnitude()*a.magnitude())};lunr.Vector.prototype.toArray=function(){return this.elements};
/*!
 * lunr.SortedSet
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.SortedSet=function(){this.length=0;this.elements=[]};lunr.SortedSet.load=function(a){var b=new this;b.elements=a;b.length=a.length;return b};lunr.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(a){if(~this.indexOf(a)){return}this.elements.splice(this.locationFor(a),0,a)},this);this.length=this.elements.length};lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()};lunr.SortedSet.prototype.map=function(b,a){return this.elements.map(b,a)};lunr.SortedSet.prototype.forEach=function(b,a){return this.elements.forEach(b,a)};lunr.SortedSet.prototype.indexOf=function(e,f,c){var f=f||0,c=c||this.elements.length,b=c-f,a=f+Math.floor(b/2),d=this.elements[a];if(b<=1){if(d===e){return a}else{return -1}}if(d<e){return this.indexOf(e,a,c)}if(d>e){return this.indexOf(e,f,a)}if(d===e){return a}};lunr.SortedSet.prototype.locationFor=function(e,f,c){var f=f||0,c=c||this.elements.length,b=c-f,a=f+Math.floor(b/2),d=this.elements[a];if(b<=1){if(d>e){return a}if(d<e){return a+1}}if(d<e){return this.locationFor(e,a,c)}if(d>e){return this.locationFor(e,f,a)}};lunr.SortedSet.prototype.intersect=function(g){var l=new lunr.SortedSet,h=0,f=0,d=this.length,k=g.length,e=this.elements,c=g.elements;while(true){if(h>d-1||f>k-1){break}if(e[h]===c[f]){l.add(e[h]);h++,f++;continue}if(e[h]<c[f]){h++;continue}if(e[h]>c[f]){f++;continue}}return l};lunr.SortedSet.prototype.clone=function(){var a=new lunr.SortedSet;a.elements=this.toArray();a.length=a.elements.length;return a};lunr.SortedSet.prototype.union=function(a){var b,d,c;if(this.length>=a.length){b=this,d=a}else{b=a,d=this}c=b.clone();c.add.apply(c,d.toArray());return c};lunr.SortedSet.prototype.toJSON=function(){return this.toArray()};
/*!
 * lunr.Index
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.Index=function(){this._fields=[];this._ref="id";this.pipeline=new lunr.Pipeline;this.documentStore=new lunr.Store;this.tokenStore=new lunr.TokenStore;this.corpusTokens=new lunr.SortedSet;this.eventEmitter=new lunr.EventEmitter;this._idfCache={};this.on("add","remove","update",(function(){this._idfCache={}}).bind(this))};lunr.Index.prototype.on=function(){var a=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,a)};lunr.Index.prototype.off=function(a,b){return this.eventEmitter.removeListener(a,b)};lunr.Index.load=function(b){if(b.version!==lunr.version){lunr.utils.warn("version mismatch: current "+lunr.version+" importing "+b.version)}var a=new this;a._fields=b.fields;a._ref=b.ref;a.documentStore=lunr.Store.load(b.documentStore);a.tokenStore=lunr.TokenStore.load(b.tokenStore);a.corpusTokens=lunr.SortedSet.load(b.corpusTokens);a.pipeline=lunr.Pipeline.load(b.pipeline);return a};lunr.Index.prototype.field=function(c,a){var a=a||{},b={name:c,boost:a.boost||1};this._fields.push(b);return this};lunr.Index.prototype.ref=function(a){this._ref=a;return this};lunr.Index.prototype.add=function(g,f){var a={},e=new lunr.SortedSet,h=g[this._ref],f=f===undefined?true:f;this._fields.forEach(function(j){var i=this.pipeline.run(lunr.tokenizer(g[j.name]));a[j.name]=i;lunr.SortedSet.prototype.add.apply(e,i)},this);this.documentStore.set(h,e);lunr.SortedSet.prototype.add.apply(this.corpusTokens,e.toArray());for(var c=0;c<e.length;c++){var b=e.elements[c];var d=this._fields.reduce(function(i,k){var l=a[k.name].length;if(!l){return i}var j=a[k.name].filter(function(m){return m===b}).length;return i+(j/l*k.boost)},0);this.tokenStore.add(b,{ref:h,tf:d})}if(f){this.eventEmitter.emit("add",g,this)}};lunr.Index.prototype.remove=function(c,b){var d=c[this._ref],b=b===undefined?true:b;if(!this.documentStore.has(d)){return}var a=this.documentStore.get(d);this.documentStore.remove(d);a.forEach(function(e){this.tokenStore.remove(e,d)},this);if(b){this.eventEmitter.emit("remove",c,this)}};lunr.Index.prototype.update=function(b,a){var a=a===undefined?true:a;this.remove(b,false);this.add(b,false);if(a){this.eventEmitter.emit("update",b,this)}};lunr.Index.prototype.idf=function(b){if(this._idfCache[b]){return this._idfCache[b]}var a=this.tokenStore.count(b),c=1;if(a>0){c=1+Math.log(this.tokenStore.length/a)}return this._idfCache[b]=c};lunr.Index.prototype.search=function(f){var e=this.pipeline.run(lunr.tokenizer(f)),b=lunr.utils.zeroFillArray(this.corpusTokens.length),a=[],d=this._fields.reduce(function(i,j){return i+j.boost},0);var h=e.some(function(i){return this.tokenStore.has(i)},this);if(!h){return[]}e.forEach(function(l,k,n){var m=1/n.length*this._fields.length*d,j=this;var o=this.tokenStore.expand(l).reduce(function(i,p){var u=j.corpusTokens.indexOf(p),q=j.idf(p),s=1,t=new lunr.SortedSet;if(p!==l){var r=Math.max(3,p.length-l.length);s=1/Math.log(r)}if(u>-1){b[u]=m*q*s}Object.keys(j.tokenStore.get(p)).forEach(function(v){t.add(v)});return i.union(t)},new lunr.SortedSet);a.push(o)},this);var c=a.reduce(function(i,j){return i.intersect(j)});var g=new lunr.Vector(b);return c.map(function(i){return{ref:i,score:g.similarity(this.documentVector(i))}},this).sort(function(j,i){return i.score-j.score})};lunr.Index.prototype.documentVector=function(h){var d=this.documentStore.get(h),g=d.length,c=lunr.utils.zeroFillArray(this.corpusTokens.length);for(var b=0;b<g;b++){var a=d.elements[b],f=this.tokenStore.get(a)[h].tf,e=this.idf(a);c[this.corpusTokens.indexOf(a)]=f*e}return new lunr.Vector(c)};lunr.Index.prototype.toJSON=function(){return{version:lunr.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}};
/*!
 * lunr.Store
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.Store=function(){this.store={};this.length=0};lunr.Store.load=function(b){var a=new this;a.length=b.length;a.store=Object.keys(b.store).reduce(function(c,d){c[d]=lunr.SortedSet.load(b.store[d]);return c},{});return a};lunr.Store.prototype.set=function(b,a){this.store[b]=a;this.length=Object.keys(this.store).length};lunr.Store.prototype.get=function(a){return this.store[a]};lunr.Store.prototype.has=function(a){return a in this.store};lunr.Store.prototype.remove=function(a){if(!this.has(a)){return}delete this.store[a];this.length--};lunr.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}};
/*!
 * lunr.stemmer
 * Copyright (C) 2013 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */
;lunr.stemmer=(function(){var h={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},e={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[^aeiou]",k="[aeiouy]",a=i+"[^aeiouy]*",g=k+"[aeiou]*",f="^("+a+")?"+g+a,b="^("+a+")?"+g+a+"("+g+")?$",d="^("+a+")?"+g+a+g+a,j="^("+a+")?"+k;return function(p){var c,r,q,s,n,m,l;if(p.length<3){return p}q=p.substr(0,1);if(q=="y"){p=q.toUpperCase()+p.substr(1)}s=/^(.+?)(ss|i)es$/;n=/^(.+?)([^s])s$/;if(s.test(p)){p=p.replace(s,"$1$2")}else{if(n.test(p)){p=p.replace(n,"$1$2")}}s=/^(.+?)eed$/;n=/^(.+?)(ed|ing)$/;if(s.test(p)){var o=s.exec(p);s=new RegExp(f);if(s.test(o[1])){s=/.$/;p=p.replace(s,"")}}else{if(n.test(p)){var o=n.exec(p);c=o[1];n=new RegExp(j);if(n.test(c)){p=c;n=/(at|bl|iz)$/;m=new RegExp("([^aeiouylsz])\\1$");l=new RegExp("^"+a+k+"[^aeiouwxy]$");if(n.test(p)){p=p+"e"}else{if(m.test(p)){s=/.$/;p=p.replace(s,"")}else{if(l.test(p)){p=p+"e"}}}}}}s=/^(.+?)y$/;if(s.test(p)){var o=s.exec(p);c=o[1];s=new RegExp(j);if(s.test(c)){p=c+"i"}}s=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;if(s.test(p)){var o=s.exec(p);c=o[1];r=o[2];s=new RegExp(f);if(s.test(c)){p=c+h[r]}}s=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;if(s.test(p)){var o=s.exec(p);c=o[1];r=o[2];s=new RegExp(f);if(s.test(c)){p=c+e[r]}}s=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;n=/^(.+?)(s|t)(ion)$/;if(s.test(p)){var o=s.exec(p);c=o[1];s=new RegExp(d);if(s.test(c)){p=c}}else{if(n.test(p)){var o=n.exec(p);c=o[1]+o[2];n=new RegExp(d);if(n.test(c)){p=c}}}s=/^(.+?)e$/;if(s.test(p)){var o=s.exec(p);c=o[1];s=new RegExp(d);n=new RegExp(b);m=new RegExp("^"+a+k+"[^aeiouwxy]$");if(s.test(c)||(n.test(c)&&!(m.test(c)))){p=c}}s=/ll$/;n=new RegExp(d);if(s.test(p)&&n.test(p)){s=/.$/;p=p.replace(s,"")}if(q=="y"){p=q.toLowerCase()+p.substr(1)}return p}})();lunr.Pipeline.registerFunction(lunr.stemmer,"stemmer");
/*!
 * lunr.stopWordFilter
 * Copyright (C) 2013 Oliver Nightingale
 */
;lunr.stopWordFilter=function(a){if(lunr.stopWordFilter.stopWords.indexOf(a)===-1){return a}};lunr.stopWordFilter.stopWords=new lunr.SortedSet;lunr.stopWordFilter.stopWords.length=119;lunr.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"];lunr.Pipeline.registerFunction(lunr.stopWordFilter,"stopWordFilter");
/*!
 * lunr.stemmer
 * Copyright (C) 2013 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */
;lunr.TokenStore=function(){this.root={docs:{}};this.length=0};lunr.TokenStore.load=function(b){var a=new this;a.root=b.root;a.length=b.length;return a};lunr.TokenStore.prototype.add=function(c,e,a){var a=a||this.root,b=c[0],d=c.slice(1);if(!(b in a)){a[b]={docs:{}}}if(d.length===0){a[b].docs[e.ref]=e;this.length+=1;return}else{return this.add(d,e,a[b])}};lunr.TokenStore.prototype.has=function(b){if(!b){return false}var c=this.root;for(var a=0;a<b.length;a++){if(!c[b[a]]){return false}c=c[b[a]]}return true};lunr.TokenStore.prototype.getNode=function(b){if(!b){return{}}var c=this.root;for(var a=0;a<b.length;a++){if(!c[b[a]]){return{}}c=c[b[a]]}return c};lunr.TokenStore.prototype.get=function(b,a){return this.getNode(b,a).docs||{}};lunr.TokenStore.prototype.count=function(b,a){return Object.keys(this.get(b,a)).length};lunr.TokenStore.prototype.remove=function(b,d){if(!b){return}var c=this.root;for(var a=0;a<b.length;a++){if(!(b[a] in c)){return}c=c[b[a]]}delete c.docs[d]};lunr.TokenStore.prototype.expand=function(c,b){var a=this.getNode(c),d=a.docs||{},b=b||[];if(Object.keys(d).length){b.push(c)}Object.keys(a).forEach(function(e){if(e==="docs"){return}b.concat(this.expand(c+e,b))},this);return b};lunr.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}};
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(a,b){if(typeof exports==="object"&&exports){b(exports)}else{var c={};b(c);if(typeof define==="function"&&define.amd){define(c)}else{a.Mustache=c}}}(this,function(a){var e=/\s*/;var l=/\s+/;var j=/\S/;var h=/\s*=/;var n=/\s*\}/;var t=/#|\^|\/|>|\{|&|=|!/;var f=RegExp.prototype.test;function s(z,y){return f.call(z,y)}function g(y){return !s(j,y)}var v=Object.prototype.toString;var k=Array.isArray||function(y){return v.call(y)==="[object Array]"};function d(y){return y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function m(y){return String(y).replace(/[&<>"'\/]/g,function(z){return c[z]})}function u(y){this.string=y;this.tail=y;this.pos=0}u.prototype.eos=function(){return this.tail===""};u.prototype.scan=function(z){var y=this.tail.match(z);if(y&&y.index===0){this.tail=this.tail.substring(y[0].length);this.pos+=y[0].length;return y[0]}return""};u.prototype.scanUntil=function(z){var y,A=this.tail.search(z);switch(A){case -1:y=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,A);this.tail=this.tail.substring(A);this.pos+=A}return y};function r(y,z){this.view=y||{};this.parent=z;this._cache={}}r.make=function(y){return(y instanceof r)?y:new r(y)};r.prototype.push=function(y){return new r(y,this)};r.prototype.lookup=function(y){var B=this._cache[y];if(!B){if(y=="."){B=this.view}else{var A=this;while(A){if(y.indexOf(".")>0){B=A.view;var C=y.split("."),z=0;while(B&&z<C.length){B=B[C[z++]]}}else{B=A.view[y]}if(B!=null){break}A=A.parent}}this._cache[y]=B}if(typeof B==="function"){B=B.call(this.view)}return B};function p(){this.clearCache()}p.prototype.clearCache=function(){this._cache={};this._partialCache={}};p.prototype.compile=function(A,y){var z=this._cache[A];if(!z){var B=a.parse(A,y);z=this._cache[A]=this.compileTokens(B,A)}return z};p.prototype.compilePartial=function(z,B,y){var A=this.compile(B,y);this._partialCache[z]=A;return A};p.prototype.getPartial=function(y){if(!(y in this._partialCache)&&this._loadPartial){this.compilePartial(y,this._loadPartial(y))}return this._partialCache[y]};p.prototype.compileTokens=function(A,z){var y=this;return function(B,D){if(D){if(typeof D==="function"){y._loadPartial=D}else{for(var C in D){y.compilePartial(C,D[C])}}}return o(A,y,r.make(B),z)}};p.prototype.render=function(A,y,z){return this.compile(A)(y,z)};function o(F,z,y,I){var C="";var A,G,H;for(var D=0,E=F.length;D<E;++D){A=F[D];G=A[1];switch(A[0]){case"#":H=y.lookup(G);if(typeof H==="object"){if(k(H)){for(var B=0,K=H.length;B<K;++B){C+=o(A[4],z,y.push(H[B]),I)}}else{if(H){C+=o(A[4],z,y.push(H),I)}}}else{if(typeof H==="function"){var J=I==null?null:I.slice(A[3],A[5]);H=H.call(y.view,J,function(L){return z.render(L,y)});if(H!=null){C+=H}}else{if(H){C+=o(A[4],z,y,I)}}}break;case"^":H=y.lookup(G);if(!H||(k(H)&&H.length===0)){C+=o(A[4],z,y,I)}break;case">":H=z.getPartial(G);if(typeof H==="function"){C+=H(y)}break;case"&":H=y.lookup(G);if(H!=null){C+=H}break;case"name":H=y.lookup(G);if(H!=null){C+=a.escape(H)}break;case"text":C+=G;break}}return C}function x(E){var z=[];var D=z;var F=[];var B;for(var A=0,y=E.length;A<y;++A){B=E[A];switch(B[0]){case"#":case"^":F.push(B);D.push(B);D=B[4]=[];break;case"/":var C=F.pop();C[5]=B[2];D=F.length>0?F[F.length-1][4]:z;break;default:D.push(B)}}return z}function b(D){var A=[];var C,z;for(var B=0,y=D.length;B<y;++B){C=D[B];if(C){if(C[0]==="text"&&z&&z[0]==="text"){z[1]+=C[1];z[3]=C[3]}else{z=C;A.push(C)}}}return A}function q(y){return[new RegExp(d(y[0])+"\\s*"),new RegExp("\\s*"+d(y[1]))]}function w(O,E){O=O||"";E=E||a.tags;if(typeof E==="string"){E=E.split(l)}if(E.length!==2){throw new Error("Invalid tags: "+E.join(", "))}var I=q(E);var A=new u(O);var G=[];var F=[];var D=[];var P=false;var N=false;function M(){if(P&&!N){while(D.length){delete F[D.pop()]}}else{D=[]}P=false;N=false}var B,z,H,J,C;while(!A.eos()){B=A.pos;H=A.scanUntil(I[0]);if(H){for(var K=0,L=H.length;K<L;++K){J=H.charAt(K);if(g(J)){D.push(F.length)}else{N=true}F.push(["text",J,B,B+1]);B+=1;if(J=="\n"){M()}}}if(!A.scan(I[0])){break}P=true;z=A.scan(t)||"name";A.scan(e);if(z==="="){H=A.scanUntil(h);A.scan(h);A.scanUntil(I[1])}else{if(z==="{"){H=A.scanUntil(new RegExp("\\s*"+d("}"+E[1])));A.scan(n);A.scanUntil(I[1]);z="&"}else{H=A.scanUntil(I[1])}}if(!A.scan(I[1])){throw new Error("Unclosed tag at "+A.pos)}C=[z,H,B,A.pos];F.push(C);if(z==="#"||z==="^"){G.push(C)}else{if(z==="/"){if(G.length===0){throw new Error('Unopened section "'+H+'" at '+B)}var y=G.pop();if(y[1]!==H){throw new Error('Unclosed section "'+y[1]+'" at '+B)}}else{if(z==="name"||z==="{"||z==="&"){N=true}else{if(z==="="){E=H.split(l);if(E.length!==2){throw new Error("Invalid tags at "+B+": "+E.join(", "))}I=q(E)}}}}}var y=G.pop();if(y){throw new Error('Unclosed section "'+y[1]+'" at '+A.pos)}F=b(F);return x(F)}a.name="mustache.js";a.version="0.7.2";a.tags=["{{","}}"];a.Scanner=u;a.Context=r;a.Writer=p;a.parse=w;a.escape=m;var i=new p();a.clearCache=function(){return i.clearCache()};a.compile=function(z,y){return i.compile(z,y)};a.compilePartial=function(z,A,y){return i.compilePartial(z,A,y)};a.compileTokens=function(z,y){return i.compileTokens(z,y)};a.render=function(A,y,z){return i.render(A,y,z)};a.to_html=function(B,z,A,C){var y=a.render(B,z,A);if(typeof C==="function"){C(y)}else{return y}}}));
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.10.2
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.com/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(a,b){if(typeof exports==="object"){module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains"))}else{if(typeof define==="function"&&define.amd){define(["./punycode","./IPv6","./SecondLevelDomains"],b)}else{a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains)}}}(this,function(b,c,h){function i(p,q){if(!(this instanceof i)){return new i(p,q)}if(p===undefined){if(typeof location!=="undefined"){p=location.href+""}else{p=""}}this.href(p);if(q!==undefined){return this.absoluteTo(q)}return this}var o=i.prototype;var m=Object.prototype.hasOwnProperty;function d(p){return p.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function t(p){return String(Object.prototype.toString.call(p)).slice(8,-1)}function l(p){return t(p)==="Array"}function k(x,w){var y={};var p,q;if(l(w)){for(p=0,q=w.length;p<q;p++){y[w[p]]=true}}else{y[w]=true}for(p=0,q=x.length;p<q;p++){if(y[x[p]]!==undefined){x.splice(p,1);q--;p--}}return x}function v(y,x){var q,w;if(l(x)){for(q=0,w=x.length;q<w;q++){if(!v(y,x[q])){return false}}return true}var p=t(x);for(q=0,w=y.length;q<w;q++){if(p==="RegExp"){if(typeof y[q]==="string"&&y[q].match(x)){return true}}else{if(y[q]===x){return true}}}return false}function g(x,q){if(!l(x)||!l(q)){return false}if(x.length!==q.length){return false}x.sort();q.sort();for(var w=0,p=x.length;w<p;w++){if(x[w]!==q[w]){return false}}return true}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:i.duplicateQueryParameters}};i.duplicateQueryParameters=false;i.protocol_expression=/^[a-z][a-z0-9-+-]*$/i;i.idn_expression=/[^a-z0-9\.-]/i;i.punycode_expression=/(xn--)/i;i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig;i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};i.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;function r(p){return encodeURIComponent(p).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}i.encode=r;i.decode=decodeURIComponent;i.iso8859=function(){i.encode=escape;i.decode=unescape};i.unicode=function(){i.encode=r;i.decode=decodeURIComponent};i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};i.encodeQuery=function(p){return i.encode(p+"").replace(/%20/g,"+")};i.decodeQuery=function(p){return i.decode((p+"").replace(/\+/g,"%20"))};i.recodePath=function(q){var p=(q+"").split("/");for(var w=0,x=p.length;w<x;w++){p[w]=i.encodePathSegment(i.decode(p[w]))}return p.join("/")};i.decodePath=function(q){var p=(q+"").split("/");for(var w=0,x=p.length;w<x;w++){p[w]=i.decodePathSegment(p[w])}return p.join("/")};var e={encode:"encode",decode:"decode"};var f;var j=function(q,p){return function(w){return i[p](w+"").replace(i.characters[q][p].expression,function(x){return i.characters[q][p].map[x]})}};for(f in e){i[f+"PathSegment"]=j("pathname",e[f])}i.encodeReserved=j("reserved","encode");i.parse=function(p,w){var x,q;if(!w){w={}}x=p.indexOf("#");if(x>-1){w.fragment=p.substring(x+1)||null;p=p.substring(0,x)}x=p.indexOf("?");if(x>-1){w.query=p.substring(x+1)||null;p=p.substring(0,x)}if(p.substring(0,2)==="//"){w.protocol="";p=p.substring(2);p=i.parseAuthority(p,w)}else{x=p.indexOf(":");if(x>-1){w.protocol=p.substring(0,x);if(w.protocol&&!w.protocol.match(i.protocol_expression)){w.protocol=undefined}else{if(w.protocol==="file"){p=p.substring(x+3)}else{if(p.substring(x+1,x+3)==="//"){p=p.substring(x+3);p=i.parseAuthority(p,w)}else{p=p.substring(x+1);w.urn=true}}}}}w.path=p;return w};i.parseHost=function(p,w){var y=p.indexOf("/");var x;var q;if(y===-1){y=p.length}if(p.charAt(0)==="["){x=p.indexOf("]");w.hostname=p.substring(1,x)||null;w.port=p.substring(x+2,y)||null}else{if(p.indexOf(":")!==p.lastIndexOf(":")){w.hostname=p.substring(0,y)||null;w.port=null}else{q=p.substring(0,y).split(":");w.hostname=q[0]||null;w.port=q[1]||null}}if(w.hostname&&p.substring(y).charAt(0)!=="/"){y++;p="/"+p}return p.substring(y)||"/"};i.parseAuthority=function(p,q){p=i.parseUserinfo(p,q);return i.parseHost(p,q)};i.parseUserinfo=function(q,x){var y=q.indexOf("@");var p=q.indexOf("/");var w;if(y>-1&&(p===-1||y<p)){w=q.substring(0,y).split(":");x.username=w[0]?i.decode(w[0]):null;w.shift();x.password=w[0]?i.decode(w.join(":")):null;q=q.substring(y+1)}else{x.username=null;x.password=null}return q};i.parseQuery=function(x){if(!x){return{}}x=x.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!x){return{}}var q={};var B=x.split("&");var z=B.length;var p,w,A;for(var y=0;y<z;y++){p=B[y].split("=");w=i.decodeQuery(p.shift());A=p.length?i.decodeQuery(p.join("=")):null;if(q[w]){if(typeof q[w]==="string"){q[w]=[q[w]]}q[w].push(A)}else{q[w]=A}}return q};i.build=function(q){var p="";if(q.protocol){p+=q.protocol+":"}if(!q.urn&&(p||q.hostname)){p+="//"}p+=(i.buildAuthority(q)||"");if(typeof q.path==="string"){if(q.path.charAt(0)!=="/"&&typeof q.hostname==="string"){p+="/"}p+=q.path}if(typeof q.query==="string"&&q.query){p+="?"+q.query}if(typeof q.fragment==="string"&&q.fragment){p+="#"+q.fragment}return p};i.buildHost=function(q){var p="";if(!q.hostname){return""}else{if(i.ip6_expression.test(q.hostname)){if(q.port){p+="["+q.hostname+"]:"+q.port}else{p+=q.hostname}}else{p+=q.hostname;if(q.port){p+=":"+q.port}}}return p};i.buildAuthority=function(p){return i.buildUserinfo(p)+i.buildHost(p)};i.buildUserinfo=function(q){var p="";if(q.username){p+=i.encode(q.username);if(q.password){p+=":"+i.encode(q.password)}p+="@"}return p};i.buildQuery=function(y,A){var w="";var z,q,p,x;for(q in y){if(m.call(y,q)&&q){if(l(y[q])){z={};for(p=0,x=y[q].length;p<x;p++){if(y[q][p]!==undefined&&z[y[q][p]+""]===undefined){w+="&"+i.buildQueryParameter(q,y[q][p]);if(A!==true){z[y[q][p]+""]=true}}}}else{if(y[q]!==undefined){w+="&"+i.buildQueryParameter(q,y[q])}}}}return w.substring(1)};i.buildQueryParameter=function(p,q){return i.encodeQuery(p)+(q!==null?"="+i.encodeQuery(q):"")};i.addQuery=function(x,p,w){if(typeof p==="object"){for(var q in p){if(m.call(p,q)){i.addQuery(x,q,p[q])}}}else{if(typeof p==="string"){if(x[p]===undefined){x[p]=w;return}else{if(typeof x[p]==="string"){x[p]=[x[p]]}}if(!l(w)){w=[w]}x[p]=x[p].concat(w)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}};i.removeQuery=function(z,p,y){var w,x,q;if(l(p)){for(w=0,x=p.length;w<x;w++){z[p[w]]=undefined}}else{if(typeof p==="object"){for(q in p){if(m.call(p,q)){i.removeQuery(z,q,p[q])}}}else{if(typeof p==="string"){if(y!==undefined){if(z[p]===y){z[p]=undefined}else{if(l(z[p])){z[p]=k(z[p],y)}}}else{z[p]=undefined}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")}}}};i.hasQuery=function(y,p,x,w){if(typeof p==="object"){for(var q in p){if(m.call(p,q)){if(!i.hasQuery(y,q,p[q])){return false}}}return true}else{if(typeof p!=="string"){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")}}switch(t(x)){case"Undefined":return p in y;case"Boolean":var A=Boolean(l(y[p])?y[p].length:y[p]);return x===A;case"Function":return !!x(y[p],p,y);case"Array":if(!l(y[p])){return false}var z=w?v:g;return z(y[p],x);case"RegExp":if(!l(y[p])){return Boolean(y[p]&&y[p].match(x))}if(!w){return false}return v(y[p],x);case"Number":x=String(x);case"String":if(!l(y[p])){return y[p]===x}if(!w){return false}return v(y[p],x);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};i.commonPath=function(q,p){var w=Math.min(q.length,p.length);var x;for(x=0;x<w;x++){if(q.charAt(x)!==p.charAt(x)){x--;break}}if(x<1){return q.charAt(0)===p.charAt(0)&&q.charAt(0)==="/"?"/":""}if(q.charAt(x)!=="/"||p.charAt(x)!=="/"){x=q.substring(0,x).lastIndexOf("/")}return q.substring(0,x+1)};i.withinString=function(p,q){return p.replace(i.find_uri_expression,q)};i.ensureValidHostname=function(p){if(p.match(i.invalid_hostname_characters)){if(!b){throw new TypeError("Hostname '"+p+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available")}if(b.toASCII(p).match(i.invalid_hostname_characters)){throw new TypeError("Hostname '"+p+"' contains characters other than [A-Z0-9.-]")}}};o.build=function(p){if(p===true){this._deferred_build=true}else{if(p===undefined||this._deferred_build){this._string=i.build(this._parts);this._deferred_build=false}}return this};o.clone=function(){return new i(this)};o.valueOf=o.toString=function(){return this.build(false)._string};e={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};j=function(p){return function(q,w){if(q===undefined){return this._parts[p]||""}else{this._parts[p]=q;this.build(!w);return this}}};for(f in e){o[f]=j(e[f])}e={query:"?",fragment:"#"};j=function(p,q){return function(w,x){if(w===undefined){return this._parts[p]||""}else{if(w!==null){w=w+"";if(w.charAt(0)===q){w=w.substring(1)}}this._parts[p]=w;this.build(!x);return this}}};for(f in e){o[f]=j(f,e[f])}e={search:["?","query"],hash:["#","fragment"]};j=function(p,q){return function(w,y){var x=this[p](w,y);return typeof x==="string"&&x.length?(q+x):x}};for(f in e){o[f]=j(e[f][1],e[f][0])}o.pathname=function(p,w){if(p===undefined||p===true){var q=this._parts.path||(this._parts.urn?"":"/");return p?i.decodePath(q):q}else{this._parts.path=p?i.recodePath(p):"/";this.build(!w);return this}};o.path=o.pathname;o.href=function(p,z){var w;if(p===undefined){return this.toString()}this._string="";this._parts=i._parts();var q=p instanceof i;var x=typeof p==="object"&&(p.hostname||p.path);if(!q&&x&&p.pathname!==undefined){p=p.toString()}if(typeof p==="string"){this._parts=i.parse(p,this._parts)}else{if(q||x){var y=q?p._parts:p;for(w in y){if(m.call(this._parts,w)){this._parts[w]=y[w]}}}else{throw new TypeError("invalid input")}}this.build(!z);return this};o.is=function(C){var z=false;var A=false;var y=false;var w=false;var q=false;var x=false;var B=false;var p=!this._parts.urn;if(this._parts.hostname){p=false;A=i.ip4_expression.test(this._parts.hostname);y=i.ip6_expression.test(this._parts.hostname);z=A||y;w=!z;q=w&&h&&h.has(this._parts.hostname);x=w&&i.idn_expression.test(this._parts.hostname);B=w&&i.punycode_expression.test(this._parts.hostname)}switch(C.toLowerCase()){case"relative":return p;case"absolute":return !p;case"domain":case"name":return w;case"sld":return q;case"ip":return z;case"ip4":case"ipv4":case"inet4":return A;case"ip6":case"ipv6":case"inet6":return y;case"idn":return x;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return B}return null};var u=o.protocol;var a=o.port;var s=o.hostname;o.protocol=function(p,q){if(p!==undefined){if(p){p=p.replace(/:(\/\/)?$/,"");if(p.match(/[^a-zA-z0-9\.+-]/)){throw new TypeError("Protocol '"+p+"' contains characters other than [A-Z0-9.+-]")}}}return u.call(this,p,q)};o.scheme=o.protocol;o.port=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p!==undefined){if(p===0){p=null}if(p){p+="";if(p.charAt(0)===":"){p=p.substring(1)}if(p.match(/[^0-9]/)){throw new TypeError("Port '"+p+"' contains characters other than [0-9]")}}}return a.call(this,p,q)};o.hostname=function(q,w){if(this._parts.urn){return q===undefined?"":this}if(q!==undefined){var p={};i.parseHost(q,p);q=p.hostname}return s.call(this,q,w)};o.host=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){return this._parts.hostname?i.buildHost(this._parts):""}else{i.parseHost(p,this._parts);this.build(!q);return this}};o.authority=function(p,q){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){return this._parts.hostname?i.buildAuthority(this._parts):""}else{i.parseAuthority(p,this._parts);this.build(!q);return this}};o.userinfo=function(p,w){if(this._parts.urn){return p===undefined?"":this}if(p===undefined){if(!this._parts.username){return""}var q=i.buildUserinfo(this._parts);return q.substring(0,q.length-1)}else{if(p[p.length-1]!=="@"){p+="@"}i.parseUserinfo(p,this._parts);this.build(!w);return this}};o.resource=function(p,w){var q;if(p===undefined){return this.path()+this.search()+this.hash()}q=i.parse(p);this._parts.path=q.path;this._parts.query=q.query;this._parts.fragment=q.fragment;this.build(!w);return this};o.subdomain=function(q,z){if(this._parts.urn){return q===undefined?"":this}if(q===undefined){if(!this._parts.hostname||this.is("IP")){return""}var p=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,p)||""}else{var y=this._parts.hostname.length-this.domain().length;var x=this._parts.hostname.substring(0,y);var w=new RegExp("^"+d(x));if(q&&q.charAt(q.length-1)!=="."){q+="."}if(q){i.ensureValidHostname(q)}this._parts.hostname=this._parts.hostname.replace(w,q);this.build(!z);return this}};o.domain=function(q,y){if(this._parts.urn){return q===undefined?"":this}if(typeof q==="boolean"){y=q;q=undefined}if(q===undefined){if(!this._parts.hostname||this.is("IP")){return""}var x=this._parts.hostname.match(/\./g);if(x&&x.length<2){return this._parts.hostname}var p=this._parts.hostname.length-this.tld(y).length-1;p=this._parts.hostname.lastIndexOf(".",p-1)+1;return this._parts.hostname.substring(p)||""}else{if(!q){throw new TypeError("cannot set domain empty")}i.ensureValidHostname(q);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=q}else{var w=new RegExp(d(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(w,q)}this.build(!y);return this}};o.tld=function(p,x){if(this._parts.urn){return p===undefined?"":this}if(typeof p==="boolean"){x=p;p=undefined}if(p===undefined){if(!this._parts.hostname||this.is("IP")){return""}var y=this._parts.hostname.lastIndexOf(".");var q=this._parts.hostname.substring(y+1);if(x!==true&&h&&h.list[q.toLowerCase()]){return h.get(this._parts.hostname)||q}return q}else{var w;if(!p){throw new TypeError("cannot set TLD empty")}else{if(p.match(/[^a-zA-Z0-9-]/)){if(h&&h.is(p)){w=new RegExp(d(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(w,p)}else{throw new TypeError("TLD '"+p+"' contains characters other than [A-Z0-9]")}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{w=new RegExp(d(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(w,p)}}}this.build(!x);return this}};o.directory=function(w,A){if(this._parts.urn){return w===undefined?"":this}if(w===undefined||w===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var q=this._parts.path.length-this.filename().length-1;var y=this._parts.path.substring(0,q)||(this._parts.hostname?"/":"");return w?i.decodePath(y):y}else{var z=this._parts.path.length-this.filename().length;var p=this._parts.path.substring(0,z);var x=new RegExp("^"+d(p));if(!this.is("relative")){if(!w){w="/"}if(w.charAt(0)!=="/"){w="/"+w}}if(w&&w.charAt(w.length-1)!=="/"){w+="/"}w=i.recodePath(w);this._parts.path=this._parts.path.replace(x,w);this.build(!A);return this}};o.filename=function(q,y){if(this._parts.urn){return q===undefined?"":this}if(q===undefined||q===true){if(!this._parts.path||this._parts.path==="/"){return""}var z=this._parts.path.lastIndexOf("/");var x=this._parts.path.substring(z+1);return q?i.decodePathSegment(x):x}else{var p=false;if(q.charAt(0)==="/"){q=q.substring(1)}if(q.match(/\.?\//)){p=true}var w=new RegExp(d(this.filename())+"$");q=i.recodePath(q);this._parts.path=this._parts.path.replace(w,q);if(p){this.normalizePath(y)}else{this.build(!y)}return this}};o.suffix=function(q,A){if(this._parts.urn){return q===undefined?"":this}if(q===undefined||q===true){if(!this._parts.path||this._parts.path==="/"){return""}var p=this.filename();var B=p.lastIndexOf(".");var y,x;if(B===-1){return""}y=p.substring(B+1);x=(/^[a-z0-9%]+$/i).test(y)?y:"";return q?i.decodePathSegment(x):x}else{if(q.charAt(0)==="."){q=q.substring(1)}var z=this.suffix();var w;if(!z){if(!q){return this}this._parts.path+="."+i.recodePath(q)}else{if(!q){w=new RegExp(d("."+z)+"$")}else{w=new RegExp(d(z)+"$")}}if(w){q=i.recodePath(q);this._parts.path=this._parts.path.replace(w,q)}this.build(!A);return this}};o.segment=function(w,p,z){var y=this._parts.urn?":":"/";var x=this.path();var A=x.substring(0,1)==="/";var q=x.split(y);if(typeof w!=="number"){z=p;p=w;w=undefined}if(w!==undefined&&typeof w!=="number"){throw new Error("Bad segment '"+w+"', must be 0-based integer")}if(A){q.shift()}if(w<0){w=Math.max(q.length+w,0)}if(p===undefined){return w===undefined?q:q[w]}else{if(w===null||q[w]===undefined){if(l(p)){q=p}else{if(p||(typeof p==="string"&&p.length)){if(q[q.length-1]===""){q[q.length-1]=p}else{q.push(p)}}}}else{if(p||(typeof p==="string"&&p.length)){q[w]=p}else{q.splice(w,1)}}}if(A){q.unshift("")}return this.path(q.join(y),z)};var n=o.query;o.query=function(q,x){if(q===true){return i.parseQuery(this._parts.query)}else{if(typeof q==="function"){var w=i.parseQuery(this._parts.query);var p=q.call(this,w);this._parts.query=i.buildQuery(p||w,this._parts.duplicateQueryParameters);this.build(!x);return this}else{if(q!==undefined&&typeof q!=="string"){this._parts.query=i.buildQuery(q,this._parts.duplicateQueryParameters);this.build(!x);return this}else{return n.call(this,q,x)}}}};o.setQuery=function(p,x,y){var w=i.parseQuery(this._parts.query);if(typeof p==="object"){for(var q in p){if(m.call(p,q)){w[q]=p[q]}}}else{if(typeof p==="string"){w[p]=x!==undefined?x:null}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}this._parts.query=i.buildQuery(w,this._parts.duplicateQueryParameters);if(typeof p!=="string"){y=x}this.build(!y);return this};o.addQuery=function(p,w,x){var q=i.parseQuery(this._parts.query);i.addQuery(q,p,w===undefined?null:w);this._parts.query=i.buildQuery(q,this._parts.duplicateQueryParameters);if(typeof p!=="string"){x=w}this.build(!x);return this};o.removeQuery=function(p,w,x){var q=i.parseQuery(this._parts.query);i.removeQuery(q,p,w);this._parts.query=i.buildQuery(q,this._parts.duplicateQueryParameters);if(typeof p!=="string"){x=w}this.build(!x);return this};o.hasQuery=function(p,x,w){var q=i.parseQuery(this._parts.query);return i.hasQuery(q,p,x,w)};o.setSearch=o.setQuery;o.addSearch=o.addQuery;o.removeSearch=o.removeQuery;o.hasSearch=o.hasQuery;o.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};o.normalizeProtocol=function(p){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!p)}return this};o.normalizeHostname=function(p){if(this._parts.hostname){if(this.is("IDN")&&b){this._parts.hostname=b.toASCII(this._parts.hostname)}else{if(this.is("IPv6")&&c){this._parts.hostname=c.best(this._parts.hostname)}}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!p)}return this};o.normalizePort=function(p){if(typeof this._parts.protocol==="string"&&this._parts.port===i.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!p)}return this};o.normalizePath=function(z){if(this._parts.urn){return this}if(!this._parts.path||this._parts.path==="/"){return this}var w;var q;var x=this._parts.path;var y,p;if(x.charAt(0)!=="/"){if(x.charAt(0)==="."){q=x.substring(0,x.indexOf("/"))}w=true;x="/"+x}x=x.replace(/(\/(\.\/)+)|\/{2,}/g,"/");while(true){y=x.indexOf("/../");if(y===-1){break}else{if(y===0){x=x.substring(3);break}}p=x.substring(0,y).lastIndexOf("/");if(p===-1){p=y}x=x.substring(0,p)+x.substring(y+3)}if(w&&this.is("relative")){x=x.substring(1)}x=i.recodePath(x);this._parts.path=x;this.build(!z);return this};o.normalizePathname=o.normalizePath;o.normalizeQuery=function(p){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(i.parseQuery(this._parts.query))}this.build(!p)}return this};o.normalizeFragment=function(p){if(!this._parts.fragment){this._parts.fragment=null;this.build(!p)}return this};o.normalizeSearch=o.normalizeQuery;o.normalizeHash=o.normalizeFragment;o.iso8859=function(){var p=i.encode;var q=i.decode;i.encode=escape;i.decode=decodeURIComponent;this.normalize();i.encode=p;i.decode=q;return this};o.unicode=function(){var p=i.encode;var q=i.decode;i.encode=r;i.decode=unescape;this.normalize();i.encode=p;i.decode=q;return this};o.readable=function(){var z=this.clone();z.username("").password("").normalize();var y="";if(z._parts.protocol){y+=z._parts.protocol+"://"}if(z._parts.hostname){if(z.is("punycode")&&b){y+=b.toUnicode(z._parts.hostname);if(z._parts.port){y+=":"+z._parts.port}}else{y+=z.host()}}if(z._parts.hostname&&z._parts.path&&z._parts.path.charAt(0)!=="/"){y+="/"}y+=z.path(true);if(z._parts.query){var B="";for(var x=0,w=z._parts.query.split("&"),p=w.length;x<p;x++){var A=(w[x]||"").split("=");B+="&"+i.decodeQuery(A[0]).replace(/&/g,"%26");if(A[1]!==undefined){B+="="+i.decodeQuery(A[1]).replace(/&/g,"%26")}}y+="?"+B.substring(1)}y+=z.hash();return y};o.absoluteTo=function(y){var q=this.clone();var x=["protocol","username","password","hostname","port"];var A,w,z;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierachical components")}if(!(y instanceof i)){y=new i(y)}if(!q._parts.protocol){q._parts.protocol=y._parts.protocol}if(this._parts.hostname){return q}for(w=0,z;z=x[w];w++){q._parts[z]=y._parts[z]}x=["query","path"];for(w=0,z;z=x[w];w++){if(!q._parts[z]&&y._parts[z]){q._parts[z]=y._parts[z]}}if(q.path().charAt(0)!=="/"){A=y.directory();q._parts.path=(A?(A+"/"):"")+q._parts.path;q.normalizePath()}q.build();return q};o.relativeTo=function(y){var w=this.clone();var D=["protocol","username","password","hostname","port"];var C,G,B,H,A;if(w._parts.urn){throw new Error("URNs do not have any generally defined hierachical components")}if(!(y instanceof i)){y=new i(y)}if(w.path().charAt(0)!=="/"||y.path().charAt(0)!=="/"){throw new Error("Cannot calculate common path from non-relative URLs")}C=i.commonPath(w.path(),y.path());for(var z=0,x;x=D[z];z++){w._parts[x]=null}if(C==="/"){return w}else{if(!C){return this.clone()}}G=y.directory();B=w.directory();if(G===B){w._parts.path=w.filename();return w.build()}H=G.substring(C.length);A=B.substring(C.length);if(G+"/"===C){if(A){A+="/"}w._parts.path=A+w.filename();return w.build()}var F="../";var q=new RegExp("^"+d(C));var E=G.replace(q,"/").match(/\//g).length-1;while(E--){F+="../"}w._parts.path=w._parts.path.replace(q,F);return w.build()};o.equals=function(q){var w=this.clone();var C=new i(q);var x={};var p={};var z={};var y,B,A;w.normalize();C.normalize();if(w.toString()===C.toString()){return true}y=w.query();B=C.query();w.query("");C.query("");if(w.toString()!==C.toString()){return false}if(y.length!==B.length){return false}x=i.parseQuery(y);p=i.parseQuery(B);for(A in x){if(m.call(x,A)){if(!l(x[A])){if(x[A]!==p[A]){return false}}else{if(!g(x[A],p[A])){return false}}z[A]=true}}for(A in p){if(m.call(p,A)){if(!z[A]){return false}}}return true};o.duplicateQueryParameters=function(p){this._parts.duplicateQueryParameters=!!p;return this};return i}));(function(c){var b=function(e){var f;var g=Array.prototype.slice;return function(){var i=g.call(arguments),h=this;clearTimeout(f);f=setTimeout(function(){e.apply(h,i)},100)}};var d=function(e){var f=e.match(/(\d+)/g);return new Date(f[0],f[1]-1,f[2])};var a=(function(){function e(g,f){this.$elem=g;this.$results=c(f.results),this.$entries=c(f.entries,this.$results),this.indexDataUrl=f.indexUrl;this.index=this.createIndex();this.template=this.compileTemplate(c(f.template));this.initialize()}e.prototype.initialize=function(){var f=this;this.loadIndexData(function(g){f.populateIndex(g);f.populateSearchFromQuery();f.bindKeypress()})};e.prototype.createIndex=function(){return lunr(function(){this.field("title",{boost:10});this.field("categories");this.field("subcategories");this.field("tags");this.ref("id");this.pipeline.remove(lunr.stemmer)})};e.prototype.compileTemplate=function(f){return Mustache.compile(f.text())};e.prototype.loadIndexData=function(f){c.getJSON(this.indexDataUrl,f)};e.prototype.populateIndex=function(g){var f=this.index;this.entries=c.map(g.entries,this.createEntry);c.each(this.entries,function(h,i){f.add(i)})};e.prototype.createEntry=function(g,f){var h=c.extend({id:f+1},g);return h};e.prototype.bindKeypress=function(){var f=this;this.$elem.bind("keyup",b(function(){f.search(c(this).val())}))};e.prototype.search=function(h){var f=this.entries;if(h.length<=2){this.$results.hide();this.$entries.empty()}else{var g=c.map(this.index.search(h),function(i){return c.grep(f,function(j){return j.id===parseInt(i.ref,10)})[0]});this.displayResults(g)}};e.prototype.displayResults=function(f){var h=this.$entries,g=this.$results;h.empty();if(f.length===0){h.append("<p>Sorry, nothing found. Please try again.</p>")}else{h.append(this.template({entries:f}))}g.show()};e.prototype.populateSearchFromQuery=function(){var f=new URI(window.location.search.toString());var g=f.search(true);if(g.hasOwnProperty("q")){this.$elem.val(g.q);this.search(g.q.toString())}};return e})();c.fn.lunrSearch=function(e){e=c.extend({},c.fn.lunrSearch.defaults,e);new a(this,e);return this};c.fn.lunrSearch.defaults={indexUrl:"/search.json",results:"#search-results",entries:".entries",template:"#search-results-template"}})(jQuery);$(function(){$("#search-query").lunrSearch({indexUrl:"/search.json",results:"#search-results",entries:".entries",template:"#search-results-template"})});